<div class="widget" *ngIf="formType != 'inline'">
  <mat-card>
    <mat-card-header>
      <div mat-card-avatar>
        <img [src]="'/assets/icons/' + entityIcon  +'.svg'" />
      </div>
      <mat-card-title>فرم اطلاعات
        {{entityLabel}}
      </mat-card-title>
      <mat-card-subtitle *ngIf="!model._id">
        ثبت
        {{entityLabel}}
        جدید
      </mat-card-subtitle>

      <mat-card-subtitle *ngIf="model._id">
        ویرایش
        {{entityLabel}}

      </mat-card-subtitle>

      <div class="action" [class.active]="mode == 'triggers'" (click)="mode = mode == 'triggers' ? 'form':'triggers'">
        <img [src]="'/assets/icons/' + 'complaints-customize-customer-voice-3'  +'.svg'" />
      </div>

    </mat-card-header>
    <mat-card-content *ngIf="mode == 'form'">

      <textarea  class="logbox">{{model | json}}</textarea>

      <ng-container *ngTemplateOutlet="form"></ng-container>

    </mat-card-content>

    <mat-card-content *ngIf="mode == 'triggers'">



    </mat-card-content>

    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="save()">ثبت</button>
      <button mat-button type="reset" (click)="reset()">ریست</button>
    </mat-card-actions>


  </mat-card>
</div>

<div class="inline-form" *ngIf="formType =='inline'">
  <ng-container *ngTemplateOutlet="form"></ng-container>
</div>


<ng-template #form>
  <form class="">

    <div class="dynamic-form-part" *ngFor="let part of formSchema.parts">

      <ndc-dynamic [ndcDynamicInputs]="extendObj( { model : model[part.propertyName] || (part.propertyType == 'string' ? '' : {}) } , part.inputs || {} )"
        [ndcDynamicOutputs]="{  modelChange : dynamicPartModelChange(part.propertyName)  }" [ndcDynamicComponent]="getDynamicPart(part.componentName)"></ndc-dynamic>

    </div>

  </form>
</ng-template>
